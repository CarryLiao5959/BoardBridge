<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Video List</title>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link href="https://vjs.zencdn.net/7.10.2/video-js.css" rel="stylesheet" />
    <script src="https://vjs.zencdn.net/7.10.2/video.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/videojs-contrib-hls/5.15.0/videojs-contrib-hls.min.js"></script>

    <style>
        /* 视频列表项的样式 */
        .video_item {
            list-style-type: none; 
            margin: 20px;
            flex: 1 0 calc(30% - 40px);
            max-width: calc(30% - 40px);
            min-width: 200px;
        }

        .video_cover_container {
            position: relative;
            width: 100%;
            padding-bottom: 56.25%;
            /* 为16:9的纵横比设置的padding值 */
            background-color: #e0e0e0;
            /* 默认背景色，可根据需要调整 */
            overflow: hidden;
            border: 2px solid gray;
            border-radius: 8px;
            transition: border-color 0.5s;
        }

        /* 视频封面图的样式 */
        .video_cover {
            position: absolute;
            top: 0;
            left: 0;
            margin: 0 auto;
            width: 100%;
            height: 100%;
            display: block;
            object-fit: cover;
            /* 保证图片不失真 */
        }

        .video_item:hover .video_cover_container {
            border-color: blue;
            /* 鼠标悬停时的边框颜色 */
        }

        /* 视频标题的样式 */
        .video_title {
            text-align: center;
        }

        .videos_container {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
        }

        /* 直接设置 #videolist 的样式 */
        .video_list {
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
            justify-content: center;
            max-width: 75%;
            align-items: center;
            gap: 12px;
        }

        .video_list .video {
            width: 240px;
            height: 160px;
        }

        .video_list .video img {
            width: 100%;
            height: 100%;
        }

        .header {
            background-color: blue;
            /* 背景颜色 */
            color: white;
            /* 文本颜色 */
            text-align: center;
            /* 文本居中 */
            padding: 20px 0;
            /* 上下内边距 */
            font-size: 32px;
            /* 字体大小 */
            font-weight: bold;
            /* 字体加粗 */
        }

        .subheader {
            background-color: #FFEB9C;
            color: black;
            text-align: center;
            padding: 10px 0;
            font-size: 20px;
            font-weight: bold;
        }

        .footer {
            background-color: #E0E0E0;
            /* 浅灰色 */
            color: black;
            text-align: center;
            padding: 10px 0;
            font-size: 16px;
            position: fixed;
            bottom: 0;
            width: 100%;
        }

        .video_list .video img {
            width: 100%;
            height: 100%;
            border: 2px solid gray;
            /* 添加边框 */
            border-radius: 8px;
            /* 圆角矩形的圆角度数 */
            transition: border-color 0.5s;
            /* 平滑的颜色过渡效果 */
        }

        .video_list .video:hover img {
            border-color: blue;
            /* 鼠标悬停时的边框颜色 */
        }

        body {
            background-image: url('/static/img/background.jpg');
            background-size: cover;
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-position: center center;
        }
    </style>
</head>

<body>
    <div class="header">VideoHub</div>
    <div class="subheader">learning arm</div>

    <!-- <h1>Video List</h1> -->
    <div class="videos_container">
        <ul id="videolist" class="video_list"></ul>
    </div>

    <script>
        $(document).ready(function () {
            $.ajax({
                url: 'http://engage-2023.com/videos',
                method: 'GET',
                success: function (data) {
                    data.videos.forEach(function (video) {
                        console.log(video.vid);
                        let videoItem = `
                            <li class="video video_item">
                                <a href="http://engage-2023.com/video?vid=${video.vid}">
                                    <div class="video_cover_container">
                                        <img src="${video.cover}" alt="${video.title}" class="video_cover">
                                    </div>
                                    <div class="video_title">${video.title}</div>
                                </a>
                            </li>
                        `;
                        $('#videolist').append(videoItem);
                    });

                    // 初始化每个 video-js 元素
                    document.querySelectorAll('video-js').forEach(function (element) {
                        videojs(element);
                    });

                },
                error: function (error) {
                    alert('Error fetching videos: ' + error.statusText);
                }
            });
        });
    </script>
    <div class="footer">http://engage-2023.com/</div>
</body>

</html>